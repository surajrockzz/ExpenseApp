<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
</head>

<body>
    <button type="button" id="butt" class="btn btn-primary">Graph</button>
    <canvas id="myChart"></canvas>
    <script>
        var obji = {
            "Food": 0,
            "Shopping": 0,
            "Entertainment": 0,
            "Lend": 0,
            "Borrow": 0
        }
        var answer = null;
        var inde = ["Food", "Shopping", "Entertainment", "Lend", "Borrow"]
        var values = [];
        $("#butt").click(function () {
            $.ajax({
                    type: 'POST',
                    url: "/query",
                    data: obji,
                    headers: {
                        accept: 'application/techfunda',
                        authorization: localStorage.getItem('token')
                    }
                })
                .done(function (results) {
                    answer = results;
                    console.log(answer)
                    for (var i = 0; i < 5; i++)
                        values.push(parseInt(answer[inde[i]], 10))
                    console.log(values);
                    var ctx = document.getElementById("myChart");
                    var myChart = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: inde,
                            datasets: [{
                                label: '# of Votes',
                                data: values,
                                backgroundColor: [
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(255, 206, 86, 0.2)',
                                    'rgba(75, 192, 192, 0.2)',
                                    'rgba(153, 102, 255, 0.2)',
                                    'rgba(255, 159, 64, 0.2)'
                                ],
                                borderColor: [
                                    'rgba(255,99,132,1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(255, 206, 86, 1)',
                                    'rgba(75, 192, 192, 1)',
                                    'rgba(153, 102, 255, 1)',
                                    'rgba(255, 159, 64, 1)'
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            scales: {
                                yAxes: [{
                                    ticks: {
                                        beginAtZero: true
                                    }
                                }]
                            }
                        }
                    });
                })
            })
    </script>
</body>

</html>